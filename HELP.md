# Spring Boot september 2024

## Voorraad Applicatie
* [https://github.com/corbroekhuis/voorraad-app.git](https://github.com/corbroekhuis/voorraad-app.git)

**_NOTE:_**  Selecteer branch voorraad-app-jdbc

<br/><br/>
<br/><br/>


### Gebruikte JDBCTemplate methodes staan hier beschreven
* [https://www.tutorialspoint.com/springjdbc/index.htm](https://www.tutorialspoint.com/springjdbc/index.htm)
  <br/><br/>
  - Read Query: [https://www.tutorialspoint.com/springjdbc/springjdbc_read_query.htm](https://www.tutorialspoint.com/springjdbc/springjdbc_read_query.htm)
  - Update Query: [https://www.tutorialspoint.com/springjdbc/springjdbc_update_query.htm](https://www.tutorialspoint.com/springjdbc/springjdbc_update_query.htm)
  - Delete Query: [https://www.tutorialspoint.com/springjdbc/springjdbc_delete_query.htm](https://www.tutorialspoint.com/springjdbc/springjdbc_delete_query.htm)
  - SimpleJdbcInsert: [https://www.tutorialspoint.com/springjdbc/springjdbc_simplejdbcinsert.htm](https://www.tutorialspoint.com/springjdbc/springjdbc_simplejdbcinsert.htm)

<br/><br/>
<br/><br/>
<br/><br/>
<br/><br/>
<br/><br/>
<br/><br/>

#### <a id="top"></a>
### Index:
* [Create tabel Artikelen](#artikelen)
* [Swagger annotations](#swagger)
* [Properties](#properties)
* [Create tabel Reviews](#reviews)

<br/><br/>
<br/><br/>
<br/><br/>
<br/><br/>

## <a id="artikelen"></a>Create Tabel Artikelen

```SQL
CREATE TABLE Artikelen(
   ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 0) PRIMARY KEY,
   NAAM VARCHAR(20) NOT NULL,
   OMSCHRIJVING  VARCHAR(20) NOT NULL,
   EAN VARCHAR(20) NOT NULL,
   ARTIKEL_NUMMER VARCHAR(20) NOT NULL,
   VOORRAAD INT NOT NULL ,
   MINIMUM_VOORRAAD INT NOT NULL
);

```
<br/><br/>
<br/><br/>
* [Top](#top)
## <a id="swagger"></a>Swagger annotations
**_NOTE:_**  Van de drie ```@ExampleObject``` annotaties wordt alleen de eerste getoond

Plaats de code boven

```java
    public ResponseEntity<ArticleDTO> createArticle(@RequestBody ArticleDTO articleDTO){
```

```java
    @Operation(summary = "Insert/Update voor een artikel",
        description= """
                <ul>
                    <li> Voeg een nieuw artikel toe of update een bestaand artikel</li>
                    <li> Als er geen id is gespecificeerd in de json dan wordt een nieuw artikel aangemaakt</li>
                    <li> Als er wel een id is gespecificeerd dan wordt het bestaande artikel geupdate </li>
                    <li> Voeg in beide gevallen geen ean toe; dat wordt gegenereerd</li>
                    <li> Nota Bene: kies een niet bestaand artikelnummer</li>
                </ul>
                """)
@ApiResponses(value = {
        @ApiResponse(responseCode = "200", description = "Bericht toegevoegd",
                content = { @Content(mediaType = "application/json",
                        schema = @Schema(implementation = Article.class),
                        examples = {
                                @ExampleObject(
                                        name = "ex0",
                                        summary="Voeg een artikel toe",
                                        description = """
                                                Deze voorbeeld JSON, update het artikel met id = 7<br>
                                                Verwijder regel '"id": 7', om een nieuw artikel toe te voegen<br>
                                                Het artikelnummer moet nog niet bestaan in de tabel<br>
                                                """,
                                        value = """
                                                  {
                                                    "id": 7,
                                                    "name": "Fat Bike B",
                                                    "description": "Black Fat Bike",
                                                    "articleNumber": "50011",
                                                    "stock": 20,
                                                    "minimumStock": 10
                                                  }
                                                """
                                ),
                                @ExampleObject(
                                        name = "ex1",
                                        summary="XXXXXXVoeg een artikel toe",
                                        description = "ex1 Voeg een artikel toe ",
                                        value = """
                                                  {
                                                    "name": "Fat Bike B",
                                                    "description": "Black Fat Bike",
                                                    "articleNumber": "50011",
                                                    "stock": 20,
                                                    "minimumStock": 10
                                                  }
                                                """
                                ),
                                @ExampleObject(
                                        name = "ex2",
                                        summary="Update een bestaand artikel",
                                        description = "ex2 Update een bestaand artikel ",
                                        value = """
                                                  {
                                                    "id": 7,
                                                    "name": "Fat Bike B",
                                                    "description": "Black Fat Bike",
                                                    "articleNumber": "50011",
                                                    "stock": 20,
                                                    "minimumStock": 10
                                                  }
                                                """
                                )
                        }),
                }) })

```

<br/><br/>
<br/><br/>

* [Top](#top)
## <a id="properties"></a>Properties


```properties
# Default: 8080
server.port=8081

ean.aansluitnummer=11999
fixed-delay.in.milliseconds=40000
spring.application.name=voorraad-app

spring.h2.console.enabled=true
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.url=jdbc:h2:file:C:/Temp/voorraad
spring.datasource.username=sa
spring.datasource.password=sa
# jpa, niet meer nodig
# spring.jpa.hibernate.ddl-auto=create

```

<br/><br/>
<br/><br/>

* [Top](#top)

## <a id="reviews"></a>Create Tabel Reviews

```SQL
CREATE TABLE Reviews(
   ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1000000) PRIMARY KEY,
   ARTIKEL_ID BIGINT NOT NULL,
   TEKST VARCHAR(200) NOT NULL,
   STERREN INT NOT NULL
);

```

<br/><br/>
<br/><br/>
* [Top](#top)

Eventueel toevoegen aan class ```Article```
```Java
    public Map<String, Object> getParameterMap(){

        Map<String,Object> parameters = new HashMap<String,Object>();
        parameters.put("naam", name);
        parameters.put("omschrijving", description);
        parameters.put("ean", ean);
        parameters.put("artikel_nummer", articleNumber);
        parameters.put("voorraad", stock);
        parameters.put("minimum_voorraad", minimumStock);
        return parameters;

    }
```

```Java
    public Object[] getValueArray(){

        Object[] valueArray = {
                name,
                description,
                articleNumber,
                ean,
                stock,
                minimumStock,
                id
		};
        
        return valueArray;
    }
```

